define
name sub attribute, value string;

city sub entity,
    owns name,
    plays marriage-located:is_city;
husband sub entity,
    owns name,
    plays marriage:is_husband;
wife sub entity,
    owns name,
    plays marriage:is_wife;

marriage sub relation,
    relates is_husband,
    relates is_wife,
    plays marriage-located:is_marriage;
marriage-located sub relation,
    relates is_city,
    relates is_marriage;

insert
$c isa city, has name "Denver";
$h isa husband, has name "John";
$w isa wife, has name "Vanessa";
$m (is_husband: $h, is_wife: $w)
    isa marriage;
(is_city: $c, is_marriage: $m)
    isa marriage-located;

match
$c isa city, has name $cn;
$h isa husband, has name $hn;
$w isa wife, has name $wn;
$m (is_husband: $h, is_wife: $w)
    isa marriage;
$ml (is_city: $c, is_marriage: $m)
    isa marriage-located;